<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALTRIX V2 - Trading Bot</title>
    <link rel="icon" href="https://i.postimg.cc/W36x5ntY/IMG-20251228-031059-298.jpg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --pink: #ff1493;
            --pink-light: #ff69b4;
            --pink-dark: #c71585;
            --bg-dark: #0a0a0a;
            --bg-card: #1a1a1a;
            --text: #ffffff;
            --shadow-pink: 0 0 30px rgba(255, 20, 147, 0.3);
        }

        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #2a0a1a 30%, #1a0a1a 70%, #0a0a0a 100%);
            font-family: 'Segoe UI', Arial, sans-serif;
            color: var(--text);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: gradientShift 20s ease infinite;
            position: relative;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0%, 100% {
                background: linear-gradient(135deg, #0a0a0a 0%, #2a0a1a 30%, #1a0a1a 70%, #0a0a0a 100%);
            }
            50% {
                background: linear-gradient(135deg, #0a0a0a 0%, #1a0a1a 30%, #2a0a1a 70%, #0a0a0a 100%);
            }
        }

        /* Trading Background Animation */
        .trading-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .particle {
            position: absolute;
            background: radial-gradient(circle, var(--pink) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 15s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) translateX(0);
                opacity: 0.3;
            }
            50% {
                transform: translateY(-100px) translateX(50px);
                opacity: 0.6;
            }
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #000 0%, #2a0a1a 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 99999;
            transition: opacity 0.5s, visibility 0.5s;
        }

        #loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-logo {
            width: 150px;
            height: 150px;
            border-radius: 20px;
            animation: pulse 2s ease-in-out infinite;
            box-shadow: 0 0 50px rgba(255, 20, 147, 0.8);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .loading-text {
            margin-top: 30px;
            font-size: 32px;
            font-weight: 900;
            background: linear-gradient(90deg, var(--pink), var(--pink-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(255, 20, 147, 0.5);
        }

        .loading-spinner {
            margin-top: 20px;
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 20, 147, 0.2);
            border-top: 4px solid var(--pink);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            100% { transform: rotate(360deg); }
        }

        /* Password Container */
        #password-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.95), rgba(42, 10, 26, 0.95));
            padding: 40px;
            border-radius: 20px;
            border: 3px solid var(--pink);
            box-shadow: var(--shadow-pink), 0 0 60px rgba(255, 20, 147, 0.2);
            text-align: center;
            width: 90%;
            max-width: 450px;
            z-index: 100000;
            animation: borderGlow 8s infinite alternate;
        }

        @keyframes borderGlow {
            0% {
                border-color: var(--pink);
                box-shadow: 0 0 40px rgba(255, 20, 147, 0.4);
            }
            50% {
                border-color: var(--pink-light);
                box-shadow: 0 0 40px rgba(255, 105, 180, 0.4);
            }
            100% {
                border-color: var(--pink-dark);
                box-shadow: 0 0 40px rgba(199, 21, 133, 0.4);
            }
        }

        .password-logo {
            width: 120px;
            height: 120px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 0 30px rgba(255, 20, 147, 0.6);
        }

        #password-container h2 {
            margin: 20px 0;
            color: var(--pink);
            font-size: 28px;
            text-shadow: 0 0 20px rgba(255, 20, 147, 0.6);
        }

        #password-container p {
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
        }

        #password-container input {
            padding: 15px;
            width: 100%;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(255, 20, 147, 0.5);
            color: white;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }

        #password-container input:focus {
            outline: none;
            border-color: var(--pink);
            box-shadow: 0 0 15px rgba(255, 20, 147, 0.5);
        }

        #password-container button {
            padding: 15px 40px;
            background: linear-gradient(135deg, var(--pink), var(--pink-dark));
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 900;
            font-size: 16px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        #password-container button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255, 20, 147, 0.6);
        }

        #password-container button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        #password-error {
            color: #ff5555;
            font-size: 14px;
            margin-top: 10px;
            display: none;
        }

        .telegram-link {
            display: inline-flex;
            align-items: center;
            margin-top: 20px;
            color: var(--pink);
            text-decoration: none;
            transition: all 0.3s;
        }

        .telegram-link:hover {
            color: var(--pink-light);
            text-shadow: 0 0 10px rgba(255, 20, 147, 0.5);
        }

        /* Popup Overlay */
        #popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 200000;
        }

        #popup-overlay.show {
            display: flex;
        }

        .popup-modal {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.98), rgba(42, 10, 26, 0.98));
            border: 3px solid var(--pink);
            border-radius: 20px;
            padding: 40px;
            max-width: 550px;
            width: 90%;
            box-shadow: var(--shadow-pink);
            text-align: center;
            animation: popupSlideIn 0.4s ease-out;
        }

        @keyframes popupSlideIn {
            from {
                transform: scale(0.7);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .popup-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }

        .popup-title {
            font-size: 26px;
            font-weight: 900;
            color: var(--pink);
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(255, 20, 147, 0.6);
        }

        .popup-message {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.85);
            margin-bottom: 30px;
            line-height: 1.8;
        }

        .popup-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(135deg, var(--pink), var(--pink-dark));
            color: white;
            margin: 5px;
        }

        .popup-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 20, 147, 0.6);
        }

        /* Main App Container (Hidden by default) */
        #app-container {
            display: none;
            width: 100%;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            z-index: 1;
            position: relative;
        }

        #app-container.show {
            display: block;
        }

        .app-header {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.9), rgba(42, 10, 26, 0.9));
            border: 2px solid var(--pink);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: var(--shadow-pink);
        }

        .app-header h1 {
            color: var(--pink);
            font-size: 32px;
            text-shadow: 0 0 20px rgba(255, 20, 147, 0.6);
        }

        .content-card {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.9), rgba(26, 26, 26, 0.9));
            border: 2px solid var(--pink);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-pink);
        }

        .content-card h2 {
            color: var(--pink);
            margin-bottom: 15px;
        }

        .content-card p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }

        /* Signal Box */
        .signal-box {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.95), rgba(42, 10, 26, 0.95));
            border: 2px solid var(--pink);
            border-radius: 6px;
            padding: 2px 6px;
            margin: 0 auto 5px;
            max-width: 280px;
            box-shadow: var(--shadow-pink);
            text-align: center;
            animation: boxGlow 2s infinite alternate;
        }

        @keyframes boxGlow {
            0% {
                box-shadow: 0 0 30px rgba(255, 20, 147, 0.4);
            }
            100% {
                box-shadow: 0 0 50px rgba(255, 20, 147, 0.6);
            }
        }

        pre#formattedSignal {
            white-space: pre-wrap;
            text-align: left;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(26, 10, 20, 0.9));
            padding: 2px 6px;
            border-radius: 4px;
            border: 1px solid rgba(255, 20, 147, 0.5);
            font-size: 0.85em;
            line-height: 1.1;
            box-shadow: inset 0 0 15px rgba(255, 20, 147, 0.15);
            font-weight: 600;
            letter-spacing: 0px;
            font-family: 'Courier New', monospace;
            max-width: 260px;
            margin: 0 auto;
        }

        .signal-direction {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
            padding: 3px 10px;
            border-radius: 5px;
            font-weight: 900;
            font-size: 0.9em;
            margin: 0;
            animation: pulse 2s infinite;
        }

        .candlestick {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 40px;
            height: 50px;
            position: relative;
        }

        .wick-top {
            width: 2px;
            height: 8px;
            background: currentColor;
        }

        .candle-body {
            width: 16px;
            height: 26px;
            border-radius: 2px;
            box-shadow: 0 0 10px currentColor;
        }

        .wick-bottom {
            width: 2px;
            height: 8px;
            background: currentColor;
        }

        .candle-green {
            color: #00ff00;
        }

        .candle-green .candle-body {
            background: #00ff00;
        }

        .candle-red {
            color: #ff0000;
        }

        .candle-red .candle-body {
            background: #ff0000;
        }

        .signal-call {
            background: linear-gradient(135deg, rgba(0, 255, 100, 0.3), rgba(0, 200, 80, 0.3));
            border: 2px solid #00ff66;
            color: #00ff66;
            text-shadow: 0 0 10px rgba(0, 255, 100, 0.8);
            box-shadow: 0 4px 15px rgba(0, 255, 100, 0.4);
        }

        .signal-put {
            background: linear-gradient(135deg, rgba(255, 50, 50, 0.3), rgba(200, 0, 0, 0.3));
            border: 2px solid #ff3333;
            color: #ff3333;
            text-shadow: 0 0 10px rgba(255, 50, 50, 0.8);
            box-shadow: 0 4px 15px rgba(255, 50, 50, 0.4);
        }

        .arrow-icon {
            font-size: 1.4em;
            font-weight: bold;
            animation: bounce 1.5s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* TradingView Container */
        .tradingview-container {
            width: 100%;
            height: 450px;
            margin: 15px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(255, 20, 147, 0.5);
            border: 2px solid var(--pink);
        }

        /* Market Selector */
        .market-selector {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.9), rgba(42, 10, 26, 0.9));
            border: 2px solid var(--pink);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow-pink);
        }

        .market-select-dropdown {
            width: 100%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid var(--pink);
            color: white;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .market-select-dropdown:focus {
            outline: none;
            box-shadow: 0 0 15px rgba(255, 20, 147, 0.5);
        }

        .quick-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .market-btn {
            padding: 12px 20px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(255, 20, 147, 0.4);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s;
            font-size: 14px;
        }

        .market-btn:hover {
            background: rgba(255, 20, 147, 0.2);
            border-color: var(--pink);
            transform: translateY(-2px);
        }

        .market-btn.active {
            background: linear-gradient(135deg, var(--pink), var(--pink-dark));
            border-color: var(--pink);
            box-shadow: 0 0 15px rgba(255, 20, 147, 0.6);
        }

        @media (max-width: 768px) {
            #password-container {
                padding: 30px 20px;
            }

            .loading-text {
                font-size: 24px;
            }

            .app-header h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Trading Background -->
    <div class="trading-bg" id="tradingBg"></div>

    <!-- Loading Screen -->
    <div id="loading-screen">
        <img src="https://i.postimg.cc/W36x5ntY/IMG-20251228-031059-298.jpg" alt="ALTRIX V2 Logo" class="loading-logo">
        <div class="loading-text">ALTRIX V2</div>
        <div class="loading-spinner"></div>
    </div>

    <!-- Password Container -->
    <div id="password-container">
        <img src="https://i.postimg.cc/W36x5ntY/IMG-20251228-031059-298.jpg" alt="ALTRIX V2 Logo" class="password-logo">
        <h2>ALTRIX V2</h2>
        <p>Enter your password to access the trading bot</p>
        <input type="password" id="password-input" placeholder="Enter Password" autocomplete="off">
        <button id="submit-password">SUBMIT</button>
        <div id="password-error"></div>
        <a href="https://t.me/TRADER_RAJ07" class="telegram-link" target="_blank" data-tg-type="support">
            üì± Contact Support: @TRADER_RAJ07
        </a>
    </div>

    <!-- Popup Overlay -->
    <div id="popup-overlay">
        <div class="popup-modal">
            <div class="popup-icon">‚ö†Ô∏è</div>
            <div class="popup-title" id="popup-title">Notice</div>
            <div class="popup-message" id="popup-message"></div>
            <div>
                <button class="popup-btn" onclick="closePopup()">OK</button>
                <button class="popup-btn" onclick="openTelegram()">Contact Support</button>
            </div>
        </div>
    </div>

    <!-- Main App Container (Hidden until authenticated) -->
    <div id="app-container">
        <div class="app-header">
            <img src="https://i.postimg.cc/W36x5ntY/IMG-20251228-031059-298.jpg" alt="ALTRIX V2" style="width: 60px; height: 60px; border-radius: 10px; margin-bottom: 10px;">
            <h1>ALTRIX V2 Trading Bot</h1>
            <p style="color: rgba(255, 255, 255, 0.7); margin-top: 10px;">Advanced Trading System</p>
        </div>

        <!-- Signal Box -->
        <div id="signalResult" class="signal-box">
            <h5 style="color: var(--pink); margin-bottom: 1px; font-size: 0.75em; font-weight: 700;">üìä Signal</h5>
            <pre id="formattedSignal"></pre>
        </div>

        <!-- TradingView Widget -->
        <div id="tradingview-widget" class="tradingview-container"></div>

        <!-- Market Selector -->
        <div class="market-selector">
            <h3 style="color: var(--pink); margin-bottom: 15px;">Select Market</h3>
            <select id="market-select" class="market-select-dropdown">
                <option value="EURUSD">EUR/USD</option>
                <option value="GBPUSD">GBP/USD</option>
                <option value="USDJPY">USD/JPY</option>
                <option value="USDCAD">USD/CAD</option>
                <option value="AUDUSD">AUD/USD</option>
                <option value="NZDUSD">NZD/USD</option>
                <option value="EURJPY">EUR/JPY</option>
                <option value="GBPJPY">GBP/JPY</option>
                <option value="EURGBP">EUR/GBP</option>
                <option value="CADJPY">CAD/JPY</option>
                <option value="XAUUSD">GOLD (XAU/USD)</option>
                <option value="XAGUSD">SILVER (XAG/USD)</option>
                <option value="USOIL">OIL</option>
                <option value="US30">US30</option>
                <option value="US500">US500</option>
                <option value="BTCUSDT">BTC/USDT</option>
                <option value="ETHUSDT">ETH/USDT</option>
            </select>
            
            <div class="quick-buttons">
                <button class="market-btn active" data-market="EURUSD">EUR/USD</button>
                <button class="market-btn" data-market="GBPUSD">GBP/USD</button>
                <button class="market-btn" data-market="USDJPY">USD/JPY</button>
                <button class="market-btn" data-market="XAUUSD">GOLD</button>
                <button class="market-btn" data-market="BTCUSDT">BTC</button>
                <button class="market-btn" data-market="ETHUSDT">ETH</button>
            </div>
        </div>

        <div class="content-card">
            <h2>üìû Support</h2>
            <p>Need assistance? Contact us on Telegram: <a href="https://t.me/TRADER_RAJ07" target="_blank" style="color: var(--pink); text-decoration: none;" data-tg-type="support">@TRADER_RAJ07</a></p>
        </div>
        
        <!-- Developer Credit -->
        <div style="text-align: center; padding: 15px; margin-top: 30px; font-size: 0.7em; color: rgba(255, 255, 255, 0.3); border-top: 1px solid rgba(255, 20, 147, 0.2);">
            <p style="margin: 0;">Developed by <a href="https://t.me/traderjisanx" target="_blank" style="color: rgba(255, 20, 147, 0.6); text-decoration: none;">@traderjisanx</a></p>
        </div>
    </div>

    <script>
        // Create animated background particles
        function createBackground() {
            const bg = document.getElementById('tradingBg');
            const particleCount = window.innerWidth <= 768 ? 10 : 20;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.width = `${Math.random() * 100 + 50}px`;
                particle.style.height = particle.style.width;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                particle.style.animationDuration = `${10 + Math.random() * 10}s`;
                bg.appendChild(particle);
            }
        }

        createBackground();

        // Hide loading screen
        window.addEventListener('load', function() {
            setTimeout(() => {
                document.getElementById('loading-screen').classList.add('hidden');
            }, 2000);
        });

        // Get device information
        function getDeviceInfo() {
            const userAgent = navigator.userAgent;
            let deviceType = 'Desktop';
            let os = 'Unknown';
            let browser = 'Unknown';

            if (/mobile/i.test(userAgent)) deviceType = 'Mobile';
            else if (/tablet/i.test(userAgent)) deviceType = 'Tablet';

            if (/windows/i.test(userAgent)) os = 'Windows';
            else if (/mac/i.test(userAgent)) os = 'MacOS';
            else if (/linux/i.test(userAgent)) os = 'Linux';
            else if (/android/i.test(userAgent)) os = 'Android';
            else if (/ios|iphone|ipad/i.test(userAgent)) os = 'iOS';

            if (/chrome/i.test(userAgent)) browser = 'Chrome';
            else if (/firefox/i.test(userAgent)) browser = 'Firefox';
            else if (/safari/i.test(userAgent)) browser = 'Safari';
            else if (/edge/i.test(userAgent)) browser = 'Edge';

            const screenResolution = `${window.screen.width}x${window.screen.height}`;
            const fingerprint = btoa(`${userAgent}-${screenResolution}-${navigator.language}-${navigator.platform}`).substring(0, 32);

            return {
                deviceType, os, browser, screenResolution, userAgent,
                deviceFingerprint: fingerprint
            };
        }

        // Show popup
        function showPopup(title, message) {
            document.getElementById('popup-title').textContent = title;
            document.getElementById('popup-message').innerHTML = message;
            document.getElementById('popup-overlay').classList.add('show');
        }

        // Close popup
        function closePopup() {
            document.getElementById('popup-overlay').classList.remove('show');
        }

        // Open Telegram
        function openTelegram() {
            window.open('https://t.me/TRADER_RAJ07', '_blank');
            closePopup();
        }

        // Click outside to close popup
        document.getElementById('popup-overlay').addEventListener('click', function(e) {
            if (e.target === this) closePopup();
        });

        // Load saved password
        window.addEventListener('DOMContentLoaded', function() {
            const savedPassword = localStorage.getItem('altrix_v2_password');
            if (savedPassword) {
                document.getElementById('password-input').value = savedPassword;
            }
        });

        // Password verification
        document.getElementById('submit-password').addEventListener('click', async function() {
            const enteredPassword = document.getElementById('password-input').value;
            const errorElement = document.getElementById('password-error');

            if (!enteredPassword) {
                errorElement.textContent = 'Please enter a password';
                errorElement.style.display = 'block';
                return;
            }

            this.disabled = true;
            this.textContent = 'Verifying...';
            errorElement.style.display = 'none';

            try {
                const deviceInfo = getDeviceInfo();

                const response = await fetch('https://ymaker114.pythonanywhere.com/api/verify/altrix-v2', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        license_key: enteredPassword,
                        device_info: deviceInfo,
                        device_fingerprint: deviceInfo.deviceFingerprint
                    })
                });

                const result = await response.json();

                if (result.valid) {
                    localStorage.setItem('altrix_v2_password', enteredPassword);
                    this.textContent = 'Access Granted!';
                    
                    // Hide password container and show app
                    setTimeout(() => {
                        document.getElementById('password-container').style.display = 'none';
                        document.getElementById('app-container').classList.add('show');
                        
                        // Start signal updates
                        startSignalUpdates();
                    }, 1000);

                    showPopup(
                        '‚úÖ SUCCESS',
                        '<strong style="color: #ff1493;">Welcome to ALTRIX V2!</strong><br><br>' +
                        'User: <strong>' + result.license_info.username + '</strong><br>' +
                        'Devices: <strong>' + result.license_info.active_devices + '/' + result.license_info.device_limit + '</strong><br>' +
                        'Status: <strong style="color: #00ff99;">ACTIVE</strong>'
                    );
                } else {
                    const message = result.message || 'Invalid password';
                    
                    if (message.includes('device limit')) {
                        showPopup(
                            'DEVICE LIMIT REACHED',
                            '<strong style="color: #ffeb3b;">' + message + '</strong><br><br>' +
                            'Need More Devices?<br>' +
                            'Contact: <strong>@traderjisanx</strong>'
                        );
                    } else {
                        showPopup(
                            'ERROR',
                            message + '<br><br>' +
                            'For any issues, contact: <strong>@TRADER_RAJ07</strong>'
                        );
                    }
                    
                    errorElement.style.display = 'none';
                }
            } catch (error) {
                console.error('Error:', error);
                showPopup(
                    'CONNECTION ERROR',
                    'Unable to connect to server.<br><br>' +
                    'Please check your internet connection.<br>' +
                    'If problem persists, contact: <strong>@traderjisanx</strong>'
                );
                errorElement.style.display = 'none';
            } finally {
                this.disabled = false;
                this.textContent = 'SUBMIT';
            }
        });

        // Enter key to submit
        document.getElementById('password-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('submit-password').click();
            }
        });

        // ============= TRADING SIGNAL SYSTEM =============
        
        let selectedMarket = 'EURUSD';
        let signalInterval = null;

        const SYMBOLS = {
            'EURUSD': 'FX:EURUSD',
            'GBPUSD': 'FX:GBPUSD',
            'USDJPY': 'FX:USDJPY',
            'USDCAD': 'FX:USDCAD',
            'AUDUSD': 'FX:AUDUSD',
            'NZDUSD': 'FX:NZDUSD',
            'EURJPY': 'FX:EURJPY',
            'GBPJPY': 'FX:GBPJPY',
            'EURGBP': 'FX:EURGBP',
            'CADJPY': 'FX:CADJPY',
            'XAUUSD': 'OANDA:XAUUSD',
            'XAGUSD': 'OANDA:XAGUSD',
            'USOIL': 'TVC:USOIL',
            'US30': 'CAPITALCOM:US30',
            'US500': 'CAPITALCOM:US500',
            'BTCUSDT': 'BINANCE:BTCUSDT',
            'ETHUSDT': 'BINANCE:ETHUSDT'
        };

        // Simple hash function
        function hash32(str) {
            let h = 0;
            for (let i = 0; i < str.length; i++) {
                h = (Math.imul(31, h) + str.charCodeAt(i)) | 0;
            }
            return Math.abs(h);
        }

        // Simple random number generator
        function mulberry32(seed) {
            return function() {
                seed = (seed + 0x6D2B79F5) | 0;
                let t = Math.imul(seed ^ (seed >>> 15), 1 | seed);
                t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t;
                return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
            };
        }

        function randInt(rng, min, max) {
            return Math.floor(rng() * (max - min + 1)) + min;
        }

        // Generate signal for current minute
        function generateSignal(market) {
            // Get India time (IST = UTC+5:30)
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const istTime = new Date(utc + (3600000 * 5.5)); // IST offset = 5.5 hours
            
            const year = istTime.getFullYear();
            const month = String(istTime.getMonth() + 1).padStart(2, '0');
            const day = String(istTime.getDate()).padStart(2, '0');
            const hours = String(istTime.getHours()).padStart(2, '0');
            const minutes = String(istTime.getMinutes()).padStart(2, '0');

            // Create seed based on time and market
            const seedStr = `ALTRIX-${year}${month}${day}-${hours}:${minutes}-${market}`;
            const rng = mulberry32(hash32(seedStr));

            const direction = rng() < 0.5 ? 'CALL' : 'PUT';
            const accuracy = randInt(rng, 75, 95) + '%';

            return {
                market: market,
                direction: direction,
                accuracy: accuracy,
                time: `${hours}:${minutes}`,
                timeframe: '1 Minute'
            };
        }

        // Build signal display
        function buildSignalHTML(signal) {
            const isCall = signal.direction === 'CALL';
            const candleClass = isCall ? 'candle-green' : 'candle-red';
            const directionClass = isCall ? 'signal-call' : 'signal-put';
            const directionColor = isCall ? '#00ff00' : '#ff0000';

            return `<div style="display: flex; justify-content: space-between; align-items: center;">
  <div style="flex: 1; text-align: left;">
    <div style="margin: 0; font-size: 0.9em;">
      <span style="color: #00ffff; font-weight: 900; text-shadow: 0 0 5px #00ffff;">${signal.market}</span>
    </div>
    <div style="margin: 0; font-size: 0.85em;">
      <span style="color: #ffeb3b; font-weight: 700;">üïê ${signal.time}</span>
    </div>
    <div style="margin: 0; font-size: 0.85em;">
      <span style="color: #00ff99; font-weight: 700;">üéØ ${signal.accuracy}</span>
    </div>
    <div style="margin: 0; font-size: 0.95em;">
      <span style="color: ${directionColor}; font-weight: 900; text-shadow: 0 0 8px ${directionColor};">üìä ${signal.direction}</span>
    </div>
  </div>
  <div style="text-align: right;">
    <div class="signal-direction ${directionClass}">
      <div class="candlestick ${candleClass}">
        <div class="wick-top"></div>
        <div class="candle-body"></div>
        <div class="wick-bottom"></div>
      </div>
    </div>
  </div>
</div>`;
        }

        // Update signal display
        function updateSignal() {
            const signal = generateSignal(selectedMarket);
            const signalElement = document.getElementById('formattedSignal');
            if (signalElement) {
                signalElement.innerHTML = buildSignalHTML(signal);
                console.log(`[ALTRIX V2] Signal: ${signal.market} ${signal.time} ${signal.direction} ~ ${signal.accuracy}`);
            }
        }

        // Initialize TradingView widget
        let tradingViewLoaded = false;
        let currentWidget = null;

        function loadTradingView(symbol) {
            const container = document.getElementById('tradingview-widget');
            if (!container) return;

            function createWidget() {
                if (currentWidget) {
                    try { currentWidget.remove(); } catch(e) {}
                }
                container.innerHTML = '';
                
                currentWidget = new TradingView.widget({
                    'container_id': 'tradingview-widget',
                    'autosize': true,
                    'symbol': symbol,
                    'interval': '1',
                    'timezone': 'Asia/Kolkata',
                    'theme': 'dark',
                    'style': '1',
                    'locale': 'en',
                    'toolbar_bg': '#0a0a0a',
                    'enable_publishing': false,
                    'hide_side_toolbar': false,
                    'allow_symbol_change': true,
                    'save_image': true,
                    'withdateranges': true,
                    'show_popup_button': true,
                    'studies': [],
                    'backgroundColor': 'rgba(0, 0, 0, 0.9)'
                });
            }

            if (!tradingViewLoaded) {
                const script = document.createElement('script');
                script.src = 'https://s3.tradingview.com/tv.js';
                script.async = true;
                script.onload = function() {
                    tradingViewLoaded = true;
                    createWidget();
                };
                document.head.appendChild(script);
            } else {
                createWidget();
            }
        }

        // Change market
        function changeMarket(market) {
            selectedMarket = market;
            const symbol = SYMBOLS[market] || 'FX:EURUSD';
            
            // Update UI
            document.querySelectorAll('.market-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            const activeBtn = document.querySelector(`.market-btn[data-market="${market}"]`);
            if (activeBtn) activeBtn.classList.add('active');
            
            const select = document.getElementById('market-select');
            if (select) select.value = market;
            
            // Update signal and chart
            updateSignal();
            loadTradingView(symbol);
        }

        // Start signal updates
        function startSignalUpdates() {
            updateSignal();
            loadTradingView(SYMBOLS[selectedMarket]);
            
            // Update signal every minute
            const now = new Date();
            const delay = (60 - now.getSeconds()) * 1000;
            setTimeout(() => {
                updateSignal();
                signalInterval = setInterval(updateSignal, 60000);
            }, delay);
        }

        // Market button event listeners
        document.addEventListener('DOMContentLoaded', function() {
            const marketButtons = document.querySelectorAll('.market-btn');
            marketButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    changeMarket(this.getAttribute('data-market'));
                });
            });

            const marketSelect = document.getElementById('market-select');
            if (marketSelect) {
                marketSelect.addEventListener('change', function() {
                    changeMarket(this.value);
                });
            }
        });
    </script>
</body>
</html>
